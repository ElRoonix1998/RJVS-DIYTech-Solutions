<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>RJVS Tech ‚Äî Soporte T√©cnico Profesional</title>
<meta name="description" content="Soporte t√©cnico profesional en Puerto Vallarta. Mantenimiento, optimizaci√≥n, recuperaci√≥n de datos, migraci√≥n HDD‚ÜíSSD. Contacto WhatsApp 322 353 3329">
<style>
  /* ---------- Paleta mejorada (contraste reforzado) ---------- */
  :root{
    --bg: #f4f7fb;
    --card: #ffffffee;
    --muted: #34445c;         /* m√°s contraste */
    --accent: #00509e;        /* azul m√°s oscuro y con punch */
    --accent-2: #008cff;
    --success: #25D366;
    --radius: 14px;
    --shadow: 0 14px 40px rgba(8,30,58,0.08);
    --max: 1200px;
    --glass: rgba(255,255,255,0.6);
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    color-scheme: light;
  }

  @media (prefers-color-scheme: dark){
    :root{
      --bg: #071227;
      --card: #081426;
      --muted: #9fb3c9;
      --accent: #2fa7ff;
      --accent-2: #1b6fb2;
      color-scheme: dark;
    }
  }

  /* ---------- Reset & base ---------- */
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg),#eaf4ff);-webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; color: #0b1b2b}
  a{color:inherit}
  img{max-width:100%;display:block}

  /* Prevent background overscroll on mobile when modal open */
  html, body { overscroll-behavior-y: auto; } /* default */
  body.modal-open { height: 100vh; overflow: hidden; -webkit-overflow-scrolling: none; }

  /* ---------- Layout ---------- */
  .site{max-width:var(--max);margin:24px auto;padding:18px}
  header{display:flex;align-items:center;justify-content:space-between;gap:14px;padding:12px;border-radius:12px;background:linear-gradient(90deg,transparent,var(--glass));backdrop-filter:blur(6px);border:1px solid rgba(2,6,23,0.04)}
  .brand{display:flex;gap:12px;align-items:center}
  .logo{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,var(--accent),var(--accent-2));display:grid;place-items:center;color:white;font-weight:800;font-size:18px}
  header h1{margin:0;font-size:1.15rem;color:var(--accent)}
  header p{margin:0;font-size:0.85rem;color:var(--muted)}
  nav{display:flex;gap:10px;align-items:center}
  .btn{padding:8px 12px;border-radius:10px;background:transparent;border:1px solid rgba(2,6,23,0.06);font-weight:700;cursor:pointer}
  .btn-primary{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:white;border:none;box-shadow:0 10px 30px rgba(0,113,200,0.12)}

  /* ---------- Hero ---------- */
  .hero{display:grid;grid-template-columns:1fr 360px;gap:22px;margin-top:18px}
  @media (max-width:980px){.hero{grid-template-columns:1fr}}
  .hero-card{background:var(--card);padding:20px;border-radius:14px;box-shadow:var(--shadow)}
  .hero-card h2{margin:0;color:var(--accent);font-size:1.6rem}
  .hero-card p{color:var(--muted);margin-top:8px}
  .tags{display:flex;flex-wrap:wrap;gap:8px;margin-top:12px}
  .tag{padding:8px 12px;border-radius:999px;background:rgba(0,0,0,0.04);font-weight:700;cursor:pointer;border:1px solid rgba(0,0,0,0.04)}

  .contact-card{background:linear-gradient(180deg,var(--accent),var(--accent-2));color:white;padding:18px;border-radius:12px;display:flex;flex-direction:column;gap:10px}
  .contact-card .big{font-weight:900;font-size:1.2rem}

  /* ---------- Panel & Services ---------- */
  .panel{display:grid;grid-template-columns:1fr 360px;gap:28px;margin-top:20px}
  @media (max-width:980px){.panel{grid-template-columns:1fr}}
  .services-wrap{background:var(--card);padding:20px;border-radius:12px;box-shadow:var(--shadow)}
  .search-row{display:flex;gap:8px;align-items:center}
  .search{flex:1;padding:10px 12px;border-radius:10px;border:1px solid #e6eef8}
  .filters{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
  .chip{padding:7px 10px;border-radius:999px;background:transparent;border:1px solid rgba(11,115,183,0.12);color:var(--accent);font-weight:700;cursor:pointer}
  .chip[aria-pressed="true"]{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:white;box-shadow:0 10px 24px rgba(11,115,183,0.12)}

  .services-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:14px;margin-top:16px}
  @media (max-width:780px){.services-grid{grid-template-columns:1fr}}
  .card-service{display:flex;gap:12px;align-items:flex-start;padding:12px;border-radius:12px;border:1px solid #e9f3fb;background:linear-gradient(180deg,rgba(255,255,255,0.9),transparent);cursor:pointer;transition:transform .14s,box-shadow .14s}
  .card-service:hover{transform:translateY(-6px);box-shadow:0 18px 40px rgba(11,95,150,0.06)}
  .card-service:focus{box-shadow:0 0 0 4px rgba(0,80,158,0.12)}
  .svc-icon{width:56px;height:56px;border-radius:10px;background:linear-gradient(135deg,var(--accent),var(--accent-2));display:flex;align-items:center;justify-content:center;color:white;font-weight:800;flex:0 0 56px}
  .svc-body{flex:1;text-align:left}
  .svc-title{font-weight:800;color:#0b1b2b}
  .svc-sub{font-size:0.9rem;color:var(--muted);margin-top:6px}
  .svc-price{font-weight:900;color:var(--accent);align-self:flex-start}

  /* ---------- Modal (responsive & scroll-safe) ---------- */
  .modal-backdrop{
    position:fixed;inset:0;background:rgba(2,6,23,0.6);display:none;align-items:center;justify-content:center;padding:16px;z-index:9999;
    /* prevent background touch scroll */
    touch-action: none;
  }

  .modal{
    background:var(--card);width:100%;max-width:960px;border-radius:12px;padding:0;box-shadow:0 20px 60px rgba(2,6,23,0.6);
    display:flex;flex-direction:column;overflow:hidden;
    max-height: 92vh;
  }

  .modal-header{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:14px 18px;border-bottom:1px solid rgba(0,0,0,0.04);background:linear-gradient(90deg,transparent,rgba(0,0,0,0.02))}
  .modal-title{font-weight:800;font-size:1.08rem}
  .modal-sub{color:var(--muted);font-size:0.95rem}

  .modal-body{
    display:grid;grid-template-columns:320px 1fr;gap:16px;padding:16px;overflow:auto; /* IMPORTANT: scroll inside modal */
    -webkit-overflow-scrolling: touch;
  }
  @media (max-width:880px){ .modal-body{grid-template-columns:1fr} }

  .modal-image{width:100%;height:220px;object-fit:cover;border-radius:10px;background:#f3f7fb}
  .thumbs{display:flex;gap:8px;margin-top:8px}
  .thumbs img{width:64px;height:48px;object-fit:cover;border-radius:8px;cursor:pointer;border:2px solid transparent}
  .thumbs img.active{border-color:var(--accent)}
  .detail-list{margin:10px 0;padding-left:18px}
  .detail-list li{margin:8px 0}
  .modal-actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px;padding-bottom:8px}

  /* small */
  :focus{outline:3px solid rgba(0,119,200,0.18);outline-offset:2px}
  .muted{color:var(--muted)}
  .kicker{font-size:0.85rem;color:var(--muted);font-weight:700}
</style>
</head>
<body>
  <div class="site" id="siteRoot">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden>RT</div>
        <div>
          <h1>RJVS Tech Solutions</h1>
          <p>Soporte profesional para PC, laptops, tablets ‚Äî Puerto Vallarta</p>
        </div>
      </div>

      <nav>
        <button class="btn" id="openServices">Servicios</button>
        <a class="btn btn-primary" href="https://wa.me/523223533329" target="_blank" rel="noopener">Contactar</a>
      </nav>
    </header>

    <!-- HERO -->
    <section class="hero" aria-label="Introducci√≥n">
      <div class="hero-card">
        <h2>Soporte t√©cnico que realmente te ayuda</h2>
        <p>Servicios para estudiantes, profesionales y usuarios: mantenimiento, optimizaci√≥n, migraci√≥n a SSD, recuperaci√≥n de datos y soporte remoto.</p>

        <div class="tags" role="list" aria-hidden="true">
          <button class="tag" data-id="mantenimiento">Mantenimiento</button>
          <button class="tag" data-id="software">Instalaci√≥n</button>
          <button class="tag" data-id="optimizacion">Optimizaci√≥n</button>
          <button class="tag" data-id="recuperacion">Recuperaci√≥n</button>
          <button class="tag" data-id="hdd2ssd">HDD ‚Üí SSD</button>
        </div>
      </div>

      <aside class="contact-card" id="contact">
        <div>
          <div class="big">üìû 322 353 3329</div>
          <div class="muted">Puerto Vallarta ‚Äî A domicilio o remoto</div>
        </div>
        <div>
          <div class="kicker">Incluye</div>
          <ul style="margin:8px 0 0 18px;color:white">
            <li>Diagn√≥stico profesional</li>
            <li>Asesor√≠a para software acad√©mico</li>
            <li>Recuperaci√≥n de datos y backups</li>
          </ul>
          <a class="btn btn-primary" href="https://wa.me/523223533329" style="display:block;margin-top:12px;text-align:center">Contactar por WhatsApp</a>
        </div>
      </aside>
    </section>

    <!-- PANEL -->
    <main class="panel" id="app" aria-live="polite">
      <section class="services-wrap" aria-labelledby="servicesTitle">
        <div class="search-row">
          <input id="search" class="search" placeholder='Buscar servicio, ejemplo: "Instalaci√≥n"' aria-label="Buscar servicios" />
          <button class="btn" id="clearSearch">Limpiar</button>
        </div>

        <div class="filters" role="tablist" aria-label="Filtrar servicios">
          <button class="chip" data-filter="all" aria-pressed="true">Todos</button>
          <button class="chip" data-filter="mantenimiento">Mantenimiento</button>
          <button class="chip" data-filter="soporte">Soporte</button>
          <button class="chip" data-filter="recuperacion">Recuperaci√≥n</button>
        </div>

        <div class="services-grid" id="servicesList" role="list" aria-labelledby="servicesTitle" style="margin-top:14px"></div>

        <p class="muted" style="margin-top:12px">Precios orientativos. Diagn√≥stico final puede ajustar el costo. Contacto WhatsApp: <strong>322 353 3329</strong></p>
      </section>

      <aside class="side" aria-labelledby="contactTitle">
        <div>
          <div id="contactTitle" class="kicker">Contacto</div>
          <div class="contact">üìû 322 353 3329</div>
          <small class="muted">WhatsApp disponible ‚Äî Respuesta r√°pida</small>

          <div style="margin-top:14px">
            <div class="kicker">Modalidades</div>
            <p class="muted">A domicilio (Zona Puerto Vallarta) ‚Ä¢ Remoto</p>
          </div>

          <div style="margin-top:14px">
            <div class="kicker">Incluye</div>
            <ul>
              <li>Diagn√≥stico profesional</li>
              <li>Asesor√≠a para estudiantes</li>
              <li>Recuperaci√≥n de datos y copias</li>
            </ul>
          </div>
        </div>

        <div style="text-align:center">
          <a class="btn btn-primary" id="waBtn" href="https://wa.me/523223533329" target="_blank" rel="noopener">Contactar por WhatsApp</a>
          <div style="font-size:12px;margin-top:8px;opacity:0.95">O ll√°manos directamente desde tu tel√©fono</div>
        </div>
      </aside>
    </main>
  </div>

  <!-- MODAL -->
  <div id="modalBackdrop" class="modal-backdrop" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="modal" role="document" aria-labelledby="modalTitle">
      <div class="modal-header">
        <div>
          <div id="modalTitle" class="modal-title"></div>
          <div id="modalSubtitle" class="modal-sub muted"></div>
        </div>
        <div>
          <button class="close-btn" id="modalClose" aria-label="Cerrar">‚úï</button>
        </div>
      </div>

      <div class="modal-body" id="modalBody">
        <div>
          <img id="modalImage" class="modal-image" src="/mnt/data/A_promotional_digital_graphic_design_advertisement.png" alt="Ilustraci√≥n servicio" loading="lazy">
          <div class="thumbs" id="modalThumbs" aria-hidden="true"></div>
        </div>

        <div>
          <p id="modalDescription" class="muted"></p>

          <h4 style="margin-top:8px">¬øQu√© incluye?</h4>
          <ul id="modalIncludes" class="detail-list"></ul>

          <h4 style="margin-top:8px">Pasos del servicio</h4>
          <ol id="modalSteps" class="detail-list"></ol>

          <div class="modal-actions" id="modalActions">
            <a id="modalCall" class="btn" href="#" aria-label="Llamar">Llamar</a>
            <a id="modalWhats" class="btn btn-primary" href="#" aria-label="WhatsApp">WhatsApp</a>
            <button id="modalPrint" class="btn" aria-label="Imprimir">Imprimir</button>
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
/* ===========================
   Datos (centralizados)
   =========================== */
const SERVICES = [
  {
    id: 'mantenimiento',
    title: 'Mantenimiento preventivo y correctivo',
    subtitle: 'Limpieza f√≠sica, ventilaci√≥n y pruebas',
    price: 300,
    filter: 'mantenimiento',
    images: [
      '/mnt/data/A_promotional_digital_graphic_design_advertisement.png',
      'https://images.unsplash.com/photo-1517336714731-489689fd1ca8?w=1200&q=60'
    ],
    description: `Inspecci√≥n completa: limpieza de polvo, verificaci√≥n de ventilaci√≥n, revisi√≥n de ventiladores y disipadores, pruebas de hardware (memoria, disco, temperaturas) y ajustes para mejorar estabilidad.`,
    includes: [
      'Limpieza interna (ventiladores, disipador)',
      'Verificaci√≥n y prueba de unidades y sensores',
      'Aplicaci√≥n de pasta t√©rmica si es necesario',
      'Chequeo de almacenamiento y memoria',
      'Informe t√©cnico y recomendaciones'
    ],
    steps: [
      'Agendar cita o acceso remoto',
      'Diagn√≥stico inicial (30‚Äì60 min)',
      'Presupuesto y aprobaci√≥n',
      'Ejecuci√≥n y pruebas finales'
    ]
  },
  {
    id: 'software',
    title: 'Instalaci√≥n de software (estudiantil)',
    subtitle: 'AutoCAD, Revit, Adobe, Office',
    price: 200,
    filter: 'soporte',
    images: [
      'https://images.unsplash.com/photo-1581092795360-fd1ca04f0952?w=1200&q=60',
      '/mnt/data/A_promotional_digital_graphic_design_advertisement.png'
    ],
    description: `Instalaci√≥n y configuraci√≥n de software acad√©mico y herramientas de productividad. Incluye instalaci√≥n de drivers, runtimes y ajustes de rendimiento.`,
    includes: [
      'Instalaci√≥n completa del software requerido',
      'Configuraci√≥n de preferencias',
      'Instalaci√≥n de drivers y runtimes',
      'Prueba de apertura y guardado de archivos'
    ],
    steps: [
      'Confirmaci√≥n de licencias',
      'Instalaci√≥n personalizada',
      'Validaci√≥n con archivos de prueba',
      'Entrega y recomendaciones'
    ]
  },
  {
    id: 'optimizacion',
    title: 'Optimizaci√≥n del equipo',
    subtitle: 'Limpieza l√≥gica y ajustes de rendimiento',
    price: 250,
    filter: 'mantenimiento',
    images: [
      'https://images.unsplash.com/photo-1519389950473-47ba0277781c?w=1200&q=60'
    ],
    description: `Limpieza de temporales, optimizaci√≥n de inicio, ajuste de servicios y configuraciones para mejorar velocidad y estabilidad.`,
    includes: [
      'Eliminar temporales y basura',
      'Optimizar programas de inicio',
      'Configuraciones de rendimiento',
      'Pruebas de benchmark opcional'
    ],
    steps: [
      'Diagn√≥stico',
      'Limpieza y ajustes',
      'Pruebas',
      'Entrega de recomendaciones'
    ]
  },
  {
    id: 'recuperacion',
    title: 'Recuperaci√≥n de archivos borrados',
    subtitle: 'Documentos, fotos y datos importantes',
    price: 250,
    filter: 'recuperacion',
    images: [
      'https://images.unsplash.com/photo-1587825140708-3c92c6c99c43?w=1200&q=60'
    ],
    description: `Recuperaci√≥n con herramientas profesionales. El √©xito depende del estado f√≠sico del dispositivo y el tiempo transcurrido desde la eliminaci√≥n.`,
    includes: [
      'Evaluaci√≥n inicial sin costo',
      'Recuperaci√≥n con herramientas forenses',
      'Entrega de archivos recuperados',
      'Recomendaciones de backup'
    ],
    steps: [
      'Evaluaci√≥n',
      'Recuperaci√≥n',
      'Extracci√≥n',
      'Entrega'
    ]
  },
  {
    id: 'hdd2ssd',
    title: 'Cambio HDD ‚Üí SSD',
    subtitle: 'Migraci√≥n segura y mejora de velocidad',
    price: 300,
    filter: 'mantenimiento',
    images: [
      'https://images.unsplash.com/photo-1587825125547-4a4a7a1d3b3e?w=1200&q=60'
    ],
    description: `Migraci√≥n de datos y sistema a SSD por clonaci√≥n o instalaci√≥n limpia. Configuraci√≥n TRIM y optimizaci√≥n final.`,
    includes: [
      'Clonaci√≥n o instalaci√≥n limpia',
      'Instalaci√≥n f√≠sica del SSD',
      'Configuraci√≥n TRIM',
      'Pruebas y verificaci√≥n'
    ],
    steps: [
      'Copia/clonaci√≥n',
      'Instalaci√≥n',
      'Configuraci√≥n',
      'Entrega'
    ]
  }
];

/* ===========================
   Utilidades (normalize, debounce, safe image)
   =========================== */
const $ = s => document.querySelector(s);
const $$ = s => Array.from(document.querySelectorAll(s));

function normalizeText(text){
  return (text||'').toString().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");
}

function debounce(fn, wait=250){
  let t;
  return (...args)=>{ clearTimeout(t); t = setTimeout(()=>fn(...args), wait); };
}

function safeImage(el, fallback){
  el.addEventListener('error', ()=>{ if(el.src !== fallback) el.src = fallback; });
}

/* ===========================
   Renderizado de tarjetas
   =========================== */
const servicesList = $('#servicesList');

function formatPrice(n){ return `$${n}`; }

function svgFor(id){
  const icons = {
    mantenimiento: `<svg width="28" height="28" viewBox="0 0 24 24" fill="none"><path d="M21 3l-6.6 6.6" stroke="white" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/><path d="M14 7l3 3" stroke="white" stroke-width="1.6"/><path d="M3 21l7-7" stroke="white" stroke-width="1.6"/></svg>`,
    software: `<svg width="28" height="28" viewBox="0 0 24 24" fill="none"><rect x="3" y="4" width="18" height="14" rx="2" stroke="white" stroke-width="1.6"/><path d="M8 8h8" stroke="white" stroke-width="1.6"/></svg>`,
    optimizacion: `<svg width="28" height="28" viewBox="0 0 24 24" fill="none"><path d="M12 2v4" stroke="white" stroke-width="1.6"/><path d="M12 18v4" stroke="white" stroke-width="1.6"/><circle cx="12" cy="12" r="6" stroke="white" stroke-width="1.6"/></svg>`,
    recuperacion: `<svg width="28" height="28" viewBox="0 0 24 24" fill="none"><path d="M21 12a9 9 0 11-3.2-6.6" stroke="white" stroke-width="1.6"/><path d="M21 3v6h-6" stroke="white" stroke-width="1.6"/></svg>`,
    hdd2ssd: `<svg width="28" height="28" viewBox="0 0 24 24" fill="none"><rect x="3" y="6" width="18" height="12" rx="2" stroke="white" stroke-width="1.6"/><path d="M7 12h10" stroke="white" stroke-width="1.6"/></svg>`
  };
  return icons[id] || `<svg width="28" height="28"><circle cx="12" cy="12" r="9" fill="white"/></svg>`;
}

function createServiceCard(s){
  const btn = document.createElement('button');
  btn.className = 'card-service';
  btn.type = 'button';
  btn.dataset.id = s.id;
  btn.setAttribute('aria-label', `${s.title} ‚Äî ${s.subtitle}`);
  btn.innerHTML = `
    <div class="svc-icon" aria-hidden>${svgFor(s.id)}</div>
    <div class="svc-body">
      <div class="svc-title">${s.title}</div>
      <div class="svc-sub">${s.subtitle}</div>
    </div>
    <div class="svc-price">${formatPrice(s.price)}</div>
  `;
  btn.tabIndex = 0;
  return btn;
}

function renderServices(filter='all', query=''){
  servicesList.innerHTML = '';
  const q = normalizeText(query);
  const items = SERVICES.filter(s => (filter==='all' ? true : s.filter===filter) &&
    (normalizeText(s.title).includes(q) || normalizeText(s.subtitle).includes(q)));
  if(!items.length){
    servicesList.innerHTML = '<div style="padding:18px;color:var(--muted)">No se encontraron servicios.</div>';
    return;
  }
  const frag = document.createDocumentFragment();
  items.forEach(s => frag.appendChild(createServiceCard(s)));
  servicesList.appendChild(frag);
}

/* ===========================
   Modal (responsive + focus trap + body lock)
   =========================== */
const modalBackdrop = $('#modalBackdrop');
const modalClose = $('#modalClose');
const modalTitle = $('#modalTitle');
const modalSubtitle = $('#modalSubtitle');
const modalImage = $('#modalImage');
const modalDescription = $('#modalDescription');
const modalIncludes = $('#modalIncludes');
const modalSteps = $('#modalSteps');
const modalThumbs = $('#modalThumbs');
const modalCall = $('#modalCall');
const modalWhats = $('#modalWhats');
const modalPrint = $('#modalPrint');

let lastFocus = null;
let removeTrap = ()=>{};

function trapFocus(container){
  const focusable = Array.from(container.querySelectorAll('a[href],button:not([disabled]),textarea,input,select,[tabindex]:not([tabindex="-1"])'));
  if(!focusable.length) return ()=>{};
  const first = focusable[0], last = focusable[focusable.length-1];
  function handler(e){
    if(e.key === 'Tab'){
      if(e.shiftKey && document.activeElement === first){ e.preventDefault(); last.focus(); }
      else if(!e.shiftKey && document.activeElement === last){ e.preventDefault(); first.focus(); }
    }
    if(e.key === 'Escape'){ closeModal(); }
  }
  container.addEventListener('keydown', handler);
  return ()=>container.removeEventListener('keydown', handler);
}

function showThumbs(images){
  modalThumbs.innerHTML = '';
  images.forEach((src, i) => {
    const img = document.createElement('img');
    img.src = src;
    img.loading = 'lazy';
    img.alt = `Vista ${i+1}`;
    if(i===0) img.classList.add('active');
    img.addEventListener('click', ()=> {
      modalImage.src = src;
      modalThumbs.querySelectorAll('img').forEach(t => t.classList.remove('active'));
      img.classList.add('active');
    });
    // fallback safety
    img.onerror = () => { img.src = '/mnt/data/A_promotional_digital_graphic_design_advertisement.png'; };
    modalThumbs.appendChild(img);
  });
}

function openModal(s){
  lastFocus = document.activeElement;
  modalTitle.textContent = s.title;
  modalSubtitle.textContent = `${s.subtitle} ‚Ä¢ ${formatPrice(s.price)}`;
  modalImage.src = s.images && s.images.length ? s.images[0] : '/mnt/data/A_promotional_digital_graphic_design_advertisement.png';
  modalImage.alt = s.title;
  modalDescription.textContent = s.description;
  modalIncludes.innerHTML = s.includes.map(i => `<li>${i}</li>`).join('');
  modalSteps.innerHTML = s.steps.map(st => `<li>${st}</li>`).join('');
  showThumbs(s.images || ['/mnt/data/A_promotional_digital_graphic_design_advertisement.png']);

  modalCall.href = `tel:+523223533329`;
  modalWhats.href = `https://wa.me/523223533329?text=${encodeURIComponent('Hola, tengo inter√©s en: '+s.title)}`;

  // show modal and lock body scroll (works on mobile)
  modalBackdrop.style.display = 'flex';
  modalBackdrop.setAttribute('aria-hidden','false');
  document.body.classList.add('modal-open');
  removeTrap = trapFocus(modalBackdrop);
  setTimeout(()=> modalClose.focus(), 120);

  // preload images
  (s.images||[]).forEach(src => { const I = new Image(); I.src = src; I.onerror = ()=>{}; });
}

function closeModal(){
  modalBackdrop.style.display = 'none';
  modalBackdrop.setAttribute('aria-hidden','true');
  document.body.classList.remove('modal-open');
  removeTrap();
  if(lastFocus) lastFocus.focus();
}

/* ===========================
   Eventos & inicializaci√≥n
   =========================== */
renderServices('all');

$$('.chip').forEach(btn => btn.addEventListener('click', ()=>{
  $$('.chip').forEach(c => c.setAttribute('aria-pressed','false'));
  btn.setAttribute('aria-pressed','true');
  renderServices(btn.dataset.filter, $('#search').value);
}));

$('#search').addEventListener('input', debounce((e)=>{
  const active = $$('.chip').find(c => c.getAttribute('aria-pressed')==='true');
  const filter = active ? active.dataset.filter : 'all';
  renderServices(filter, e.target.value);
}, 180));

$('#clearSearch').addEventListener('click', ()=>{ $('#search').value=''; renderServices('all'); });

// open modal by delegation
servicesList.addEventListener('click', (ev)=>{
  const card = ev.target.closest('.card-service');
  if(!card) return;
  const id = card.dataset.id;
  const svc = SERVICES.find(x => x.id === id);
  if(svc) openModal(svc);
});

// keyboard support
servicesList.addEventListener('keydown', (e) => {
  if(e.key === 'Enter'){
    const card = e.target.closest('.card-service');
    if(card){
      const id = card.dataset.id;
      const svc = SERVICES.find(x => x.id === id);
      if(svc) openModal(svc);
    }
  }
});

// modal controls
modalClose.addEventListener('click', closeModal);
modalBackdrop.addEventListener('click', (e)=>{ if(e.target === modalBackdrop) closeModal(); });
document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closeModal(); });
$('#modalPrint')?.addEventListener('click', ()=> window.print());

// quick hero tags open & openServices
$('#openServices').addEventListener('click', ()=>{ document.getElementById('servicesList').scrollIntoView({behavior:'smooth'}); });
$$('.tag').forEach(t => t.addEventListener('click', (e)=> {
  const id = t.dataset.id;
  $$('.chip').forEach(c => c.setAttribute('aria-pressed','false'));
  const chip = $$('.chip').find(c => c.dataset.filter === (id==='hdd2ssd' ? 'mantenimiento' : id ));
  if(chip) chip.setAttribute('aria-pressed','true');
  renderServices(chip ? chip.dataset.filter : 'all', $('#search').value);
  const first = SERVICES.find(s => s.id === id);
  if(first) openModal(first);
}));

// image fallback for main modal image
safeImage(modalImage, '/mnt/data/A_promotional_digital_graphic_design_advertisement.png');

/* Small API (console) */
window.RJVS = {
  addService: s => { SERVICES.push(s); renderServices('all'); },
  openService: id => { const s = SERVICES.find(x=>x.id===id); if(s) openModal(s); }
};

</script>
</body>
</html>